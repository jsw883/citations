<!DOCTYPE html>
<html lang="en">
  <head>
  
  <!-- Standard head -->
    <meta charset="utf-8">
    <title>The Citations @ Yale Graduate School</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
    <link rel="manifest" href="../manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Bootstrap core CSS -->
    <link href="../css/libs/bootstrap-3.3.4.css" rel="stylesheet">
    <!--<link href="../css/libs/jquery-ui-1.10.3.custom.css" rel="stylesheet">
    <link href="../css/libs/angular-ui-0.3.0.css" rel="stylesheet">-->
    
    <!-- Custom styles for this template -->
    <link href="../css/customised/navbar.css" rel="stylesheet">
    <link href="../css/customised/body.css" rel="stylesheet">
    <link href="../css/customised/head.css" rel="stylesheet">
    <link href="../css/customised/fonts.css" rel="stylesheet">
    
    <link href="../css/libs/blueimp-gallery-2.11.2.css" rel="stylesheet">
    <link href="../css/customised/gallery.css" rel="stylesheet">
    
    <link href="../css/customised/margins.css" rel="stylesheet">
    
    <style type="text/css"></style>
    
  </head>

  <body>
    <div id="wrap">
      
      <!-- header container -->
      <div class="container">
        
        <!-- header text and images -->
        <div class="head" id="head"><a href="#">
          <p class="head-name no-margined">
            <span class="yaledesrom" style="color:#0000AA">Yale</span> <span class="yaledesrom"> Citations</span><sup class="yaledesrom">1</sup>
          </p>
          <p class="head-sub no-margined hidden-xs" style="padding-right:8px">
            <sup class="yaledesrom">1 </sup><span class="yaledesrom">Yale's Graduate </span><span class="yaledesita"> A Cappella </span><span class="yaledesrom"> Group</span>
          </p>
        </a></div>
        
        <!-- static navbar -->
        <div class="navbar navbar-default">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand navbar-label" href="#">Menu</a>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../members/index.html">Members</a></li>
              <li><a href="../bookings/index.html">Bookings</a></li>
              <li><a href="../music/index.html">Music</a></li>
              <li><a href="../performances/index.html">Performances</a></li>
              <li class="active"><a href="#">Photos</a></li>
              <li><a href="../videos/index.html">Videos</a></li>
            </ul>
          </div>
        </div>
        
      </div>
      
      <!-- main container -->
      <div class="container">
        
        <!-- splash image -->
        <div class="row">
          <div class="col-md-12">
            <a href="../ticketing/index.html">
            <!-- <img src="../img/background/citations-banner-main.jpg" class="img-responsive margined"> -->
            <img src="../img/background/spring-concert-2015.jpg" class="img-responsive margined visible-xs">
            <div class="img-container-scaling margined hidden-xs" style="background-image:url(../img/background/spring-concert-2015.jpg);"><div class="bitterbold" id="floating">SPRING&nbsp;CONCERT</div></div></a>
          </div>
        </div>
         
        <!-- main text boxes -->
        <div class="col-md-12 text-box">
          <h4 class="no-top-margined">Photos</h4>
          <p align="justify" class="no-bot-margined">
          Below is a carousel of all the photos from our events and performances so far during 2013. Check out our performances to find out when this is going to be updated, and you could be with us in the next set of photos!
          </p>
        </div>
        
        <!-- blueimp-gallery-carousel -->
        <div class="row">
          <div class="col-md-12">
            <div id="blueimp-gallery-carousel" class="blueimp-gallery blueimp-gallery-carousel blueimp-gallery-controls" style="padding-bottom: 66.67%;">
              <div class="slides"></div>
              <h4 class="title"></h4>
              <a class="prev"><span style="margin-left:-3px;">‹</span></a>
              <a class="next"><span style="margin-left:+3px;">›</span></a>
              <a class="play-pause"></a>
              <ol class="indicator"></ol>
            </div>
          </div>
        </div>
        
        <!-- galleries -->
        <div id="gallery-container">
        </div>
        
      </div>
      
      <div id="push"></div>
    </div>
    
    <!-- blueimp-gallery lightbox -->
    <div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-lightbox blueimp-gallery-controls">
      <div class="slides"></div>
      <h4 class="title"></h4>
      <a class="prev"><span style="margin-left:-3px;">‹</span></a>
      <a class="next"><span style="margin-left:+3px;">›</span></a>
      <a class="close">×</a>
      <a class="play-pause"></a>
      <ol class="indicator"></ol>
    </div>
    
    <!-- footer -->
    <div class="foot" id="foot">
      <div class="container">
        <p class="no-margined">Copyright © 2013, The Citations, Yale Graduate School. All rights reserved. Designed by <a href="mailto:james.s.williams@yale.edu">James Williams</a></p>
      </div>
    <div>
    
    <!-- bootstrap core JavaScript -->
    <!-- ========================================================== -->
    <!-- placed at the end of the document so the pages load faster -->
    
    <script src="../js/libs/jquery-1.10.2.js"></script>
    <script src="../js/libs/jquery-ui-1.10.3.js"></script>
    <script src="../js/libs/bootstrap-3.3.4.js"></script>
    
    <script src="../js/libs/blueimp-gallery-2.11.2.js"></script>
    
    <!-- Flickr script -->
    <script>
      function imgError(img) {
        img.src = img.src;
      }
      function populate(result) {
        
        var requests = [];
        
        $.each(result.photosets.photoset, function (index, photoset) {
          
          $('#gallery-container').append($('<div/>')
            .append($('<h4>')
              .prop('class', 'no-top-margined')
              .text(photoset.title._content))
            .append($('<p>')
              .prop('align', 'justify')
              .prop('class', 'no-bot-margined')
              .text(photoset.description._content))
            .prop('class', 'col-md-12 text-box')
            .attr('data-gallery', ''));
          $('#gallery-container').append($('<div/>')
            .append($('<div>')
              .append($('<div>')
                .prop('id', photoset.id)
                .prop('class', 'gallery'))
              .prop('class', 'col-md-12'))
            .prop('class', 'row'));
          $('#gallery-container').append($('<div/>')
            .prop('class', 'divider'));
          
          var jax = $.ajax({
            url: 'https://api.flickr.com/services/rest/',
            data: {
              format: 'json',
              method: 'flickr.photosets.getPhotos',
              api_key: '2dd9be651d5db029e6444515a0fa3868',
              user_id: '131652881@N03',
              photoset_id: photoset.id
            },
            dataType: 'jsonp',
            jsonp: 'jsoncallback'
          }).done(function (result) {
            var baseUrl;
            // Add images from photosets:
            $.each(result.photoset.photo, function (index, photo) {
              baseUrl = 'http://farm' + photo.farm + '.static.flickr.com/' + photo.server + '/' + photo.id + '_' + photo.secret;
              dateTime = new Date().getTime();
              
              $.ajax({
                url: 'https://api.flickr.com/services/rest/',
                data: {
                  format: 'json',
                  method: 'flickr.photos.getSizes',
                  api_key: '2dd9be651d5db029e6444515a0fa3868',
                  photo_id: photo.id
                },
                dataType: 'jsonp',
                jsonp: 'jsoncallback'
              }).done(function (result) {
                temp = $.grep(result.sizes.size, function(item) { return item.label == "Original"})[0].source
                console.log(temp);
              });
              
              $('#' + photoset.id).append($('<a/>')
                .append($('<img>')
                  .error(function() { imgError(this); })
                  .prop('src', baseUrl + '_q.jpg?' + dateTime))
                .prop('href', baseUrl + '_b.jpg?' + dateTime)
                .prop('title', photo.title)
                .attr('data-photo', ''));
            });
          });
          
          requests.push(jax);
          
        });
        
        return(requests)
      }
    </script>
    
    <script>
      $(function () {
          // Load albums from Flickr (YaleCitations)
        $.ajax({
          url: 'https://api.flickr.com/services/rest/',
          data: {
            format: 'json',
            method: 'flickr.photosets.getList',
            api_key: '2dd9be651d5db029e6444515a0fa3868',
            user_id: '131652881@N03'
          },
          dataType: 'jsonp',
          jsonp: 'jsoncallback'
        }).done(function (result) {
          // console.log(JSON.stringify(result));
          // Add photosets:
          $.when.apply($, populate(result)).done(function() {
            console.log($("#gallery-container").find("a"));
            blueimp.Gallery(
              $("#gallery-container").find("a"),
              {
                container: '#blueimp-gallery-carousel',
                titleElement: 'h4',
                carousel: true,
                enableKeyboardNavigation: true,
                preloadRange: 5
              }
            );
            
            console.log($("#gallery-container").find(".gallery"));
            $.each($("#gallery-container").find(".gallery"), function(i,g) {
              console.log(g.id);
              document.getElementById(g.id).onclick = function (event) {
                event = event || window.event;
                var target = event.target || event.srcElement,
                  link = target.src ? target.parentNode : target,
                  options = {index: link, event: event},
                  links = this.getElementsByTagName('a');
                blueimp.Gallery(links, options);
              };
            });
            
          })
          
        });
      });

    </script>
    
    <!--<script type="text/javascript">
      $(document).ready(function () {
        $('.carousel').carousel({
          interval: 5000
        });
      });
    </script>-->
    
  </body>
  
  
</html>